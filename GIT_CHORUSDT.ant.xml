<project name="GIT_CHORUSDT" basedir=".">


	<property name="git.exe" location="D:\ForgeDeveloper\ForgeDeveloper-0.4.1\PortableGit\bin\git.exe" />

	<property name="repo_mtes_chorusdt" location="G:\WarchoLife\WarchoPortable\gitrepo_mtes_chorusdt" />
	<property name="nohttps_mtes_chorusdt" value="scm-forge.din.developpement-durable.gouv.fr/git/mtes_chorusdt" />
	<property name="uri_mtes_chorusdt" value="https://scm-forge.din.developpement-durable.gouv.fr/git/mtes_chorusdt" />


	<taskdef resource="net/sf/antcontrib/antcontrib.properties">
		<classpath>
			<pathelement location="lib-ant/contrib/ant-contrib-1.0b3.jar" />
		</classpath>
	</taskdef>

	<macrodef name="git-clone">
		<attribute name="projetjava" />
		<sequential>
			<propertycopy name="uri_projetjava" from="uri_@{projetjava}" />
			<propertycopy name="repo_projetjava" from="repo_@{projetjava}" />
			<echo>clone ${uri_projetjava} ${repo_projetjava}</echo>
			<delete dir="${repo_projetjava}" />
			<exec executable="${git.exe}" failonerror="true">
				<arg line="clone" />
				<arg line="-b" />
				<arg line="livraison/4.2" />
				<arg line="${uri_projetjava}" />
				<arg line="${repo_projetjava}" />
			</exec>
		</sequential>
	</macrodef>

	

	<target name="clone_mtes_chorusdt">
		<git-clone projetjava="mtes_chorusdt" />
	</target>

	



	<target name="git-config-acai">
		<exec executable="${git.exe}" failonerror="true">
			<arg line="config" />
			<arg line="--global" />
			<arg line="user.name" />
			<arg line="herve.marchal" />
		</exec>

		<exec executable="${git.exe}" failonerror="true">
			<arg line="config" />
			<arg line="--global" />
			<arg line="user.email" />
			<arg line="herve.marchal@developpement-durable.gouv.fr" />
		</exec>

		<exec executable="${git.exe}" failonerror="true">
			<arg line="config" />
			<arg line="--global" />
			<arg line="http.proxy" />
			<arg line="proxy-rie.ac.i2:8080" />
		</exec>

		<exec executable="${git.exe}" failonerror="true">
			<arg line="config" />
			<arg line="--global" />
			<arg line="http.https://scm-forge.din.developpement-durable.gouv.fr.sslVerify" />
			<arg line="false" />
		</exec>

		<exec executable="${git.exe}" failonerror="true">
			<arg line="config" />
			<arg line="--global" />
			<arg line="--add" />
			<arg line="http.sslVersion" />
			<arg line="tlsv1" />
		</exec>


	</target>

	<target name="set-origin">
		<input message="Mot de passe" addproperty="pass" />
		
		<exec executable="${git.exe}" failonerror="true">
			<arg line="remote" />
			<arg line="add" />
			<arg line="origin" />
			<arg line="https://herve.marchal:${pass}@${nohttps_mtes_chorusdt}" />
		</exec>
		<exec executable="${git.exe}" failonerror="true">
			<arg line="remote" />
			<arg line="-v" />
		</exec>
	</target>
	
	<target name="remove-origin">
			<exec executable="${git.exe}" failonerror="true">
				<arg line="remote" />
				<arg line="remove" />
				<arg line="origin" />
			</exec>
			<exec executable="${git.exe}" failonerror="true">
					<arg line="remote" />
					<arg line="-v" />
			</exec>
	</target>	
	
	<target name="remove-remote_branch">
				<exec executable="${git.exe}" failonerror="true">
					<arg line="push" />
					<arg line="origin" />
					<arg line="--delete" />
					<arg line="livraison/4.2" />
				</exec>
				
		</target>	

	<target name="git remote -v">
		<exec executable="${git.exe}" failonerror="true">
			<arg line="remote" />
			<arg line="-v" />
		</exec>
	</target>

	<target name="git push branch">
		<exec executable="${git.exe}" failonerror="true">
			<arg line="push" />
			<arg line="origin" />
			<arg line="livraison/5.0" />
		</exec>
	</target>
	
	<target name="git commit amend">
			<exec executable="${git.exe}" failonerror="true">
				<arg line="commit" />
				<arg line="--amend" />
				<arg line="-m"/>
				<arg line='"livraison/4.2.1"' />
			</exec>
		</target>
	
	<target name="iexplorer">
	  <exec executable="cmd">
		<arg value="/c"/>
		<arg value="C:\Program Files\Internet Explorer\iexplore.exe"/>

	    <arg value="https://scm-forge.din.developpement-durable.gouv.fr/redmine/projects/mtes_chorusdt"/>
	  </exec>
	</target>

<target name="firefox">
	  <exec executable="cmd">
		<arg value="/c"/>
		<arg value="C:\Program Files\Mozilla Firefox\firefox.exe"/>

	    <arg value="https://scm-forge.din.developpement-durable.gouv.fr/redmine/projects/mtes_chorusdt/repository?utf8=âœ“&amp;rev=livraison%2F4.2"/>
	  </exec>
	</target>




</project>